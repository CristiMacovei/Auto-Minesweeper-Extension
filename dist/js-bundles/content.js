(()=>{"use strict";var o;!function(o){o[o.UNCOVERED=-1]="UNCOVERED",o[o.FLAG=-2]="FLAG",o[o.REVEAL_0=0]="REVEAL_0",o[o.REVEAL_1=1]="REVEAL_1",o[o.REVEAL_2=2]="REVEAL_2",o[o.REVEAL_3=3]="REVEAL_3",o[o.REVEAL_4=4]="REVEAL_4",o[o.REVEAL_5=5]="REVEAL_5",o[o.REVEAL_6=6]="REVEAL_6",o[o.REVEAL_7=7]="REVEAL_7",o[o.REVEAL_8=8]="REVEAL_8"}(o||(o={}));var n=function(){return n=Object.assign||function(o){for(var n,t=1,e=arguments.length;t<e;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(o[r]=n[r]);return o},n.apply(this,arguments)};function t(n){if(n){var t=n.split(" ")[1];switch(t){case"blank":return o.UNCOVERED;case"bombflagged":return o.FLAG;case"open0":return o.REVEAL_0;case"open1":return o.REVEAL_1;case"open2":return o.REVEAL_2;case"open3":return o.REVEAL_3;case"open4":return o.REVEAL_4;case"open5":return o.REVEAL_5;case"open6":return o.REVEAL_6;case"open7":return o.REVEAL_7;case"open8":return o.REVEAL_8;default:return console.log("[Warn] Unknown state found: ".concat(t)),null}}}function e(o,n,t,e){return[{deltaRow:-1,deltaCol:0},{deltaRow:-1,deltaCol:1},{deltaRow:0,deltaCol:1},{deltaRow:1,deltaCol:1},{deltaRow:1,deltaCol:0},{deltaRow:1,deltaCol:-1},{deltaRow:0,deltaCol:-1},{deltaRow:-1,deltaCol:-1}].map((function(t){var e=t.deltaRow,r=t.deltaCol;return{row:o+e,col:n+r}})).filter((function(o){var n=o.row,r=o.col;return 0<n&&n<t&&0<r&&r<e}))}window.addEventListener("load",(function(r){return a=void 0,c=void 0,i=function(){var r,a,c;return function(o,n){var t,e,r,a,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,e&&(r=2&a[0]?e.return:a[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,a[1])).done)return r;switch(e=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,e=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!((r=(r=c.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){c.label=a[1];break}if(6===a[0]&&c.label<r[1]){c.label=r[1],r=a;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(a);break}r[2]&&c.ops.pop(),c.trys.pop();continue}a=n.call(o,c)}catch(o){a=[6,o],e=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(l){return r=function(){for(var o=Array.from(document.querySelectorAll("div.square")),n=-1,t=-1,e=o.map((function(o){var e=o.id.split("_").map((function(o){return parseInt(o)})),r=e[0],a=e[1];return r>=n&&(n=r+1),a>=t&&(t=a+1),{div:o,row:r,col:a}})),r=[],a=0;a<n;++a){r.push([]);for(var c=0;c<t;++c)r[a].push(null)}return e.forEach((function(o){r[o.row][o.col]={tileDiv:o.div}})),{matrix:r,numRows:n-1,numCols:t-1}}(),console.log("Loaded tiles: ",r),a=document.getElementById("face"),c="",setInterval((function(){if(!a.className.includes("facedead")&&!a.className.includes("faceooh")){r.matrix.forEach((function(o){return o.forEach((function(o){o.tileDiv.classList.remove("red"),o.tileDiv.classList.remove("green")}))}));var l=(u=r.matrix,s=r.numRows,f=r.numCols,[].concat(function(r,a,c){for(var l=[],i=function(i){for(var u=function(u){var s=t(r[i][u].tileDiv.className);if(null!==s&&s>=0){var f=e(i,u,a,c).map((function(o){return{pos:o,tileDiv:r[o.row][o.col].tileDiv}})),v=f.filter((function(n){return t(n.tileDiv.className)===o.FLAG})),p=f.filter((function(n){return t(n.tileDiv.className)===o.UNCOVERED}));p.length>0&&v.length===s&&(l=l.concat(p.map((function(o){var t=o.pos,e=o.tileDiv;return n(n({type:"reveal"},t),{tileDiv:e,reason:"(".concat(i,", ").concat(u,") fully flagged")})}))))}},s=1;s<c;++s)u(s)},u=1;u<a;++u)i(u);return l}(u,s,f)).concat(function(r,a,c){for(var l=[],i=function(i){for(var u=function(u){var s=t(r[i][u].tileDiv.className);if(null!==s&&s>=0){var f=e(i,u,a,c).map((function(o){return{pos:o,tileDiv:r[o.row][o.col].tileDiv}})),v=f.filter((function(n){return t(n.tileDiv.className)===o.FLAG})),p=f.filter((function(n){return t(n.tileDiv.className)===o.UNCOVERED})),E=s-v.length;p.length>0&&p.length===E&&(l=l.concat(p.map((function(o){var t=o.pos,e=o.tileDiv;return n(n({type:"flag"},t),{tileDiv:e,reason:"(".concat(i,", ").concat(u,") not flagged")})}))))}},s=1;s<c;++s)u(s)},u=1;u<a;++u)i(u);return l}(u,s,f)).concat(function(n,r,a){for(var c,l,i=[],u=function(u){for(var s=function(s){console.log("Trying to run off of ".concat(u,", ").concat(s));var f=t(n[u][s].tileDiv.className);if(null!==f&&f>=0){var v=e(u,s,r,a).map((function(o){return{pos:o,tileDiv:n[o.row][o.col].tileDiv}})),p=v.filter((function(n){return t(n.tileDiv.className)===o.FLAG})),E=v.filter((function(n){return t(n.tileDiv.className)===o.UNCOVERED})),d=f-p.length;if(console.log("Running 1-2 off of (".concat(u,", ").concat(s,")")),2===E.length&&1===d){var m=E[0],R=E[1],g=m.pos.row-R.pos.row,w=m.pos.col-R.pos.col;if(console.log("Empties: (".concat(m.pos.row,",").concat(m.pos.col,"), (").concat(R.pos.row,",").concat(R.pos.col,")")),Math.abs(g)+Math.abs(w)!==1)return{value:void 0};console.log("Passed line 268 check");for(var h=function(f){var v=m.pos.row+g*f,p=m.pos.col+w*f;if(console.log("[".concat(u,", ").concat(s," @ ").concat(f,"] Candidate (").concat(v,", ").concat(p)),0<v&&v<r&&0<p&&p<a&&t(null===(l=null===(c=n[v][p])||void 0===c?void 0:c.tileDiv)||void 0===l?void 0:l.className)===o.UNCOVERED){var E=v,d=p;E-u==2?(--E,d=s):E-u==-2?(++E,d=s):d-s==2?(--d,E=u):d-s==-2&&(++d,E=u),console.log("Targeted tile is (".concat(E,", ").concat(d,")"));var h=t(n[E][d].tileDiv.className);if(console.log("Targeted tile state: ".concat(h)),null!==h&&h>0){console.log("Passed line 311 check");var D=e(E,d,r,a).map((function(o){return{pos:o,tileDiv:n[o.row][o.col].tileDiv}})),L=D.filter((function(n){return t(n.tileDiv.className)===o.FLAG})),A=D.filter((function(n){return t(n.tileDiv.className)===o.UNCOVERED})),V=h-L.length;console.log("[".concat(u,", ").concat(s,"] - Final check: num flags for next target = ").concat(V)),2===V&&3===A.length?i.push({row:v,col:p,tileDiv:n[v][p].tileDiv,type:"flag",reason:"1-2 from (".concat(u,",").concat(s,")")}):1===V&&A.forEach((function(o){o.pos.row!==m.pos.row&&o.pos.col!==m.pos.col&&o.pos.row!==R.pos.row&&o.pos.col!==R.pos.col&&i.push({row:v,col:p,tileDiv:n[v][p].tileDiv,type:"reveal",reason:"1-2 from (".concat(u,",").concat(s,")")})}))}}},D=-2;D<=1;D+=3)h(D)}}},f=1;f<a;++f){var v=s(f);if("object"==typeof v)return v}},s=1;s<r;++s){var f=u(s);if("object"==typeof f)return f.value}return i}(u,s,f)));l.forEach((function(o){o.tileDiv?o.tileDiv.classList.add("flag"===o.type?"red":"green"):console.log("fucked up:",o)}));var i=l.map((function(o){return"".concat(o.type,"@$({move.row},").concat(o.col,")")})).join("+");l.length>0&&i!==c&&console.log("Found auto moves: ",l),c=i}var u,s,f}),50),[2]}))},new((l=void 0)||(l=Promise))((function(o,n){function t(o){try{r(i.next(o))}catch(o){n(o)}}function e(o){try{r(i.throw(o))}catch(o){n(o)}}function r(n){var r;n.done?o(n.value):(r=n.value,r instanceof l?r:new l((function(o){o(r)}))).then(t,e)}r((i=i.apply(a,c||[])).next())}));var a,c,l,i}))})();